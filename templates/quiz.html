<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz</title>
<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
<!-- You can link to your CSS file here -->
</head>
<body>

<div class="container">
  <h1>Quiz: {{ language }}</h1>
  <div class="question-container">
    <h2>Question {{ question_number }} of {{ total_questions }}</h2>
    <p>{{ question.text }}</p>

    <form action="/answer" method="post">
      <!-- Dynamically generate answer options here -->
      {% for option in question.options %}
      <input type="radio" id="option{{ loop.index }}" name="answer" value="{{ option }}">
      <label for="option{{ loop.index }}">{{ option }}</label><br>
      {% endfor %}

      <button type="submit" class="button">Submit Answer</button>
    </form>
  </div>

  <div class="score-container">
    <p>Current Score: {{ score }}</p>
  </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
      const form = document.querySelector("form");
      form.addEventListener("submit", function(e) {
        e.preventDefault(); // Prevent the default form submission
    
        const formData = new FormData(form);
        const selectedOption = formData.get('answer'); // Assuming 'answer' is the name of your radio inputs
    
        // AJAX request to your Flask backend
        fetch("/answer", {
          method: "POST",
          body: JSON.stringify({ answer: selectedOption }),
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json'
          },
        })
        .then(response => response.json())
        .then(data => {
          // Update your page based on the response
          // For example, display if the answer was correct or not
          // and then load the next question without reloading the page
        });
      });
    });
    </script>
    
</body>
</html>